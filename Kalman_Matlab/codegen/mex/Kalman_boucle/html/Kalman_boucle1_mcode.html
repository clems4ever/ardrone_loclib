<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [ <span class="var type1" id="S2T14U3">Xk</span>,<span class="var type1" id="S3T12U4">Pk</span>,<span class="var type1" id="S4T13U5">Zk</span>,<span class="var type1" id="S5T28U6">Pred</span> ] = Kalman_boucle( <span class="var type1" id="S6T13U9">NewMeasure</span>, <span class="var type1" id="S7T19U10">R</span>, <span class="var type1" id="S8T14U11">Xpre</span>, <span class="var type1" id="S9T12U12">Ppre</span>, <span class="var type1" id="S10T13U13">Zpre</span> )</span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">%KALMAN_boucle Summary of this function goes here</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">%   Detailed explanation goes here</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4"> 4</a></span><span class="line"><span class="comment">% Boucle de filtre de Kalman</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5"> 5</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6"> 6</a></span><span class="line"><span class="comment">%Initialisations</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7"> 7</a></span><span class="line">    <span class="comment">%Temps d'échantillonnage</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8"> 8</a></span><span class="line">    <span class="mxinfo" id="T1:U10"><span class="var type1" id="S11T1U16">Te</span> = <span class="mxinfo" id="T1:U12">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9"> 9</a></span><span class="line">    <span class="comment">%Process noise</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10">10</a></span><span class="line">    <span class="mxinfo" id="T1:U13"><span class="var type1" id="S12T1U20">incertitude_modele</span> = <span class="mxinfo" id="T1:U15">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11">11</a></span><span class="line">    <span class="mxinfo" id="T12:U16"><span class="var type1" id="S13T12U24">Q</span> = <span class="mxinfo" id="T12:U18"><span class="var type1" id="S12T1U26">incertitude_modele</span> * eye(4)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12">12</a></span><span class="line">    <span class="mxinfo" id="T1:U20"><span class="var type1" id="S15T1U32">M</span> = <span class="mxinfo" id="T1:U22">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13">13</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,14" id="srcline14">14</a></span><span class="line">    <span class="mxinfo" id="T14:U23"><span class="var type1" id="S2T14U36">Xk</span>=<span class="mxinfo" id="T14:U25">zeros(<span class="mxinfo" id="T1:U26">4</span>,1)</span></span>;  <span class="comment">%6 si on prend en compte l'accélération</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,15" id="srcline15">15</a></span><span class="line">    <span class="mxinfo" id="T12:U27"><span class="var type1" id="S3T12U43">Pk</span>=<span class="mxinfo" id="T12:U29">eye(4)</span></span>;     <span class="comment">%6 si on prend en compte l'accélération</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,16" id="srcline16">16</a></span><span class="line">    <span class="mxinfo" id="T13:U30"><span class="var type1" id="S4T13U49">Zk</span>=<span class="mxinfo" id="T13:U32">zeros(<span class="mxinfo" id="T1:U33">8</span>,1)</span></span>; <span class="comment">%10 si on prend en compte l'accélération</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,17" id="srcline17">17</a></span><span class="line">    <span class="mxinfo" id="T13:U34"><span class="var type1" id="S17T13U56">In</span>=<span class="mxinfo" id="T13:U36">zeros(<span class="mxinfo" id="T1:U37">8</span>,1)</span></span>; <span class="comment">%10</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,18" id="srcline18">18</a></span><span class="line">     </span></span>
<span class="srcline"><span class="lineno"><a href="1,19" id="srcline19">19</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,20" id="srcline20">20</a></span><span class="line">    <span class="comment">% Matrice d'état</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,21" id="srcline21">21</a></span><span class="line">    <span class="mxinfo" id="T12:U38"><span class="var type1" id="S18T12U63">A</span> = <span class="mxinfo" id="T12:U40">[1  0  <span class="var type1" id="S11T1U68">Te</span>   0;      </span></span><span class="comment"><span class="mxinfo" id="T12:U38"><span class="mxinfo" id="T12:U40">%position, vitesse sur X</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,22" id="srcline22">22</a></span><span class="line"><span class="mxinfo" id="T12:U38"><span class="mxinfo" id="T12:U40">         0  1   0   <span class="var type1" id="S11T1U74">Te</span>;     </span></span><span class="comment"><span class="mxinfo" id="T12:U38"><span class="mxinfo" id="T12:U40">%position, vitesse sur X</span></span> </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,23" id="srcline23">23</a></span><span class="line"><span class="mxinfo" id="T12:U38"><span class="mxinfo" id="T12:U40">         0  0   1   0;      </span></span><span class="comment"><span class="mxinfo" id="T12:U38"><span class="mxinfo" id="T12:U40">%vitesse sur X</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,24" id="srcline24">24</a></span><span class="line"><span class="mxinfo" id="T12:U38"><span class="mxinfo" id="T12:U40">         0  0   0   1]</span></span>;     <span class="comment">%vitesse sur Y</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,25" id="srcline25">25</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,26" id="srcline26">26</a></span><span class="line">    <span class="comment">% Matrice des mesures</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,27" id="srcline27">27</a></span><span class="line">    <span class="mxinfo" id="T17:U43"><span class="var type1" id="S19T17U87">C</span>=<span class="mxinfo" id="T17:U45">[ <span class="mxinfo" id="T29:U46"><span class="mxinfo" id="T1:U47">1</span> <span class="mxinfo" id="T1:U48">0</span> <span class="mxinfo" id="T1:U49">0</span> <span class="mxinfo" id="T1:U50">0</span></span>      </span></span><span class="comment"><span class="mxinfo" id="T17:U43"><span class="mxinfo" id="T17:U45">%position X     GPS</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,28" id="srcline28">28</a></span><span class="line"><span class="mxinfo" id="T17:U43"><span class="mxinfo" id="T17:U45">        <span class="mxinfo" id="T29:U51"><span class="mxinfo" id="T1:U52">0</span> <span class="mxinfo" id="T1:U53">1</span> <span class="mxinfo" id="T1:U54">0</span> <span class="mxinfo" id="T1:U55">0</span></span>      </span></span><span class="comment"><span class="mxinfo" id="T17:U43"><span class="mxinfo" id="T17:U45">%position Y     GPS</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,29" id="srcline29">29</a></span><span class="line"><span class="mxinfo" id="T17:U43"><span class="mxinfo" id="T17:U45">        <span class="mxinfo" id="T29:U56"><span class="mxinfo" id="T1:U57">1</span> <span class="mxinfo" id="T1:U58">0</span> <span class="mxinfo" id="T1:U59">0</span> <span class="mxinfo" id="T1:U60">0</span></span>      </span></span><span class="comment"><span class="mxinfo" id="T17:U43"><span class="mxinfo" id="T17:U45">%position X     ODOM</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,30" id="srcline30">30</a></span><span class="line"><span class="mxinfo" id="T17:U43"><span class="mxinfo" id="T17:U45">        <span class="mxinfo" id="T29:U61"><span class="mxinfo" id="T1:U62">0</span> <span class="mxinfo" id="T1:U63">1</span> <span class="mxinfo" id="T1:U64">0</span> <span class="mxinfo" id="T1:U65">0</span></span>      </span></span><span class="comment"><span class="mxinfo" id="T17:U43"><span class="mxinfo" id="T17:U45">%position Y     ODOM</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,31" id="srcline31">31</a></span><span class="line"><span class="mxinfo" id="T17:U43"><span class="mxinfo" id="T17:U45">        <span class="mxinfo" id="T29:U66"><span class="mxinfo" id="T1:U67">1</span> <span class="mxinfo" id="T1:U68">0</span> <span class="mxinfo" id="T1:U69">0</span> <span class="mxinfo" id="T1:U70">0</span></span>      </span></span><span class="comment"><span class="mxinfo" id="T17:U43"><span class="mxinfo" id="T17:U45">%position X     TAG</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,32" id="srcline32">32</a></span><span class="line"><span class="mxinfo" id="T17:U43"><span class="mxinfo" id="T17:U45">        <span class="mxinfo" id="T29:U71"><span class="mxinfo" id="T1:U72">0</span> <span class="mxinfo" id="T1:U73">1</span> <span class="mxinfo" id="T1:U74">0</span> <span class="mxinfo" id="T1:U75">0</span></span>      </span></span><span class="comment"><span class="mxinfo" id="T17:U43"><span class="mxinfo" id="T17:U45">%position Y     TAG</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,33" id="srcline33">33</a></span><span class="line"><span class="mxinfo" id="T17:U43"><span class="mxinfo" id="T17:U45">        <span class="mxinfo" id="T29:U76"><span class="mxinfo" id="T1:U77">0</span> <span class="mxinfo" id="T1:U78">0</span> <span class="mxinfo" id="T1:U79">1</span> <span class="mxinfo" id="T1:U80">0</span></span>      </span></span><span class="comment"><span class="mxinfo" id="T17:U43"><span class="mxinfo" id="T17:U45">%vitesse X      VIMU</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,34" id="srcline34">34</a></span><span class="line"><span class="mxinfo" id="T17:U43"><span class="mxinfo" id="T17:U45">        <span class="mxinfo" id="T29:U81"><span class="mxinfo" id="T1:U82">0</span> <span class="mxinfo" id="T1:U83">0</span> <span class="mxinfo" id="T1:U84">0</span> <span class="mxinfo" id="T1:U85">1</span></span>]</span></span>;    <span class="comment">%vitesse Y      VIMU</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,35" id="srcline35">35</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,36" id="srcline36">36</a></span><span class="line">    <span class="comment">%Maj de C en fonction de la présence où non des mesures /!\</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,37" id="srcline37">37</a></span><span class="line">     <span class="comment">%GPS</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,38" id="srcline38">38</a></span><span class="line">     <span class="keyword">if</span> ( <span class="mxinfo" id="T4:U86"><span class="mxinfo" id="T1:U87"><span class="var type1" id="S10T13U135">Zpre</span>(<span class="mxinfo" id="T1:U89">1</span>)</span> == <span class="mxinfo" id="T1:U90">0</span></span> || <span class="mxinfo" id="T4:U91"><span class="mxinfo" id="T1:U92"><span class="var type1" id="S10T13U140">Zpre</span>(<span class="mxinfo" id="T1:U94">2</span>)</span> == <span class="mxinfo" id="T1:U95">0</span></span> )</span></span>
<span class="srcline"><span class="lineno"><a href="1,39" id="srcline39">39</a></span><span class="line">        <span class="mxinfo" id="T29:U96"><span class="mxinfo" id="T29:U97"><span class="var type1" id="S19T17U146">C</span>(<span class="mxinfo" id="T1:U99">1</span>,:)</span> = <span class="mxinfo" id="T29:U100">[<span class="mxinfo" id="T1:U101">0</span> <span class="mxinfo" id="T1:U102">0</span> <span class="mxinfo" id="T1:U103">0</span> <span class="mxinfo" id="T1:U104">0</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,40" id="srcline40">40</a></span><span class="line">        <span class="mxinfo" id="T29:U105"><span class="mxinfo" id="T29:U106"><span class="var type1" id="S19T17U158">C</span>(<span class="mxinfo" id="T1:U108">2</span>,:)</span> = <span class="mxinfo" id="T29:U109">[<span class="mxinfo" id="T1:U110">0</span> <span class="mxinfo" id="T1:U111">0</span> <span class="mxinfo" id="T1:U112">0</span> <span class="mxinfo" id="T1:U113">0</span>]</span></span>;     </span></span>
<span class="srcline"><span class="lineno"><a href="1,41" id="srcline41">41</a></span><span class="line">     <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,42" id="srcline42">42</a></span><span class="line">         <span class="mxinfo" id="T29:U114"><span class="mxinfo" id="T29:U115"><span class="var type1" id="S19T17U171">C</span>(<span class="mxinfo" id="T1:U117">1</span>,:)</span> = <span class="mxinfo" id="T29:U118">[<span class="mxinfo" id="T1:U119">1</span> <span class="mxinfo" id="T1:U120">0</span> <span class="mxinfo" id="T1:U121">0</span> <span class="mxinfo" id="T1:U122">0</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,43" id="srcline43">43</a></span><span class="line">         <span class="mxinfo" id="T29:U123"><span class="mxinfo" id="T29:U124"><span class="var type1" id="S19T17U183">C</span>(<span class="mxinfo" id="T1:U126">2</span>,:)</span> = <span class="mxinfo" id="T29:U127">[<span class="mxinfo" id="T1:U128">0</span> <span class="mxinfo" id="T1:U129">1</span> <span class="mxinfo" id="T1:U130">0</span> <span class="mxinfo" id="T1:U131">0</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,44" id="srcline44">44</a></span><span class="line">     <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,45" id="srcline45">45</a></span><span class="line">     </span></span>
<span class="srcline"><span class="lineno"><a href="1,46" id="srcline46">46</a></span><span class="line">     <span class="comment">%ODOM</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,47" id="srcline47">47</a></span><span class="line">     <span class="keyword">if</span> ( <span class="mxinfo" id="T4:U132"><span class="mxinfo" id="T1:U133"><span class="var type1" id="S10T13U198">Zpre</span>(<span class="mxinfo" id="T1:U135">3</span>)</span> == <span class="mxinfo" id="T1:U136">0</span></span> || <span class="mxinfo" id="T4:U137"><span class="mxinfo" id="T1:U138"><span class="var type1" id="S10T13U203">Zpre</span>(<span class="mxinfo" id="T1:U140">4</span>)</span> == <span class="mxinfo" id="T1:U141">0</span></span> )</span></span>
<span class="srcline"><span class="lineno"><a href="1,48" id="srcline48">48</a></span><span class="line">        <span class="mxinfo" id="T29:U142"><span class="mxinfo" id="T29:U143"><span class="var type1" id="S19T17U209">C</span>(<span class="mxinfo" id="T1:U145">3</span>,:)</span> = <span class="mxinfo" id="T29:U146">[<span class="mxinfo" id="T1:U147">0</span> <span class="mxinfo" id="T1:U148">0</span> <span class="mxinfo" id="T1:U149">0</span> <span class="mxinfo" id="T1:U150">0</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,49" id="srcline49">49</a></span><span class="line">        <span class="mxinfo" id="T29:U151"><span class="mxinfo" id="T29:U152"><span class="var type1" id="S19T17U221">C</span>(<span class="mxinfo" id="T1:U154">4</span>,:)</span> = <span class="mxinfo" id="T29:U155">[<span class="mxinfo" id="T1:U156">0</span> <span class="mxinfo" id="T1:U157">0</span> <span class="mxinfo" id="T1:U158">0</span> <span class="mxinfo" id="T1:U159">0</span>]</span></span>;     </span></span>
<span class="srcline"><span class="lineno"><a href="1,50" id="srcline50">50</a></span><span class="line">     <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,51" id="srcline51">51</a></span><span class="line">         <span class="mxinfo" id="T29:U160"><span class="mxinfo" id="T29:U161"><span class="var type1" id="S19T17U234">C</span>(<span class="mxinfo" id="T1:U163">3</span>,:)</span> = <span class="mxinfo" id="T29:U164">[<span class="mxinfo" id="T1:U165">1</span> <span class="mxinfo" id="T1:U166">0</span> <span class="mxinfo" id="T1:U167">0</span> <span class="mxinfo" id="T1:U168">0</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,52" id="srcline52">52</a></span><span class="line">         <span class="mxinfo" id="T29:U169"><span class="mxinfo" id="T29:U170"><span class="var type1" id="S19T17U246">C</span>(<span class="mxinfo" id="T1:U172">4</span>,:)</span> = <span class="mxinfo" id="T29:U173">[<span class="mxinfo" id="T1:U174">0</span> <span class="mxinfo" id="T1:U175">1</span> <span class="mxinfo" id="T1:U176">0</span> <span class="mxinfo" id="T1:U177">0</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,53" id="srcline53">53</a></span><span class="line">     <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,54" id="srcline54">54</a></span><span class="line">     </span></span>
<span class="srcline"><span class="lineno"><a href="1,55" id="srcline55">55</a></span><span class="line">     <span class="comment">%TAG</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,56" id="srcline56">56</a></span><span class="line">     <span class="keyword">if</span> ( <span class="mxinfo" id="T4:U178"><span class="mxinfo" id="T1:U179"><span class="var type1" id="S10T13U261">Zpre</span>(<span class="mxinfo" id="T1:U181">5</span>)</span> == <span class="mxinfo" id="T1:U182">0</span></span> || <span class="mxinfo" id="T4:U183"><span class="mxinfo" id="T1:U184"><span class="var type1" id="S10T13U266">Zpre</span>(<span class="mxinfo" id="T1:U186">6</span>)</span> == <span class="mxinfo" id="T1:U187">0</span></span> )</span></span>
<span class="srcline"><span class="lineno"><a href="1,57" id="srcline57">57</a></span><span class="line">        <span class="mxinfo" id="T29:U188"><span class="mxinfo" id="T29:U189"><span class="var type1" id="S19T17U272">C</span>(<span class="mxinfo" id="T1:U191">5</span>,:)</span> = <span class="mxinfo" id="T29:U192">[<span class="mxinfo" id="T1:U193">0</span> <span class="mxinfo" id="T1:U194">0</span> <span class="mxinfo" id="T1:U195">0</span> <span class="mxinfo" id="T1:U196">0</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,58" id="srcline58">58</a></span><span class="line">        <span class="mxinfo" id="T29:U197"><span class="mxinfo" id="T29:U198"><span class="var type1" id="S19T17U284">C</span>(<span class="mxinfo" id="T1:U200">6</span>,:)</span> = <span class="mxinfo" id="T29:U201">[<span class="mxinfo" id="T1:U202">0</span> <span class="mxinfo" id="T1:U203">0</span> <span class="mxinfo" id="T1:U204">0</span> <span class="mxinfo" id="T1:U205">0</span>]</span></span>;      </span></span>
<span class="srcline"><span class="lineno"><a href="1,59" id="srcline59">59</a></span><span class="line">     <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,60" id="srcline60">60</a></span><span class="line">         <span class="mxinfo" id="T29:U206"><span class="mxinfo" id="T29:U207"><span class="var type1" id="S19T17U297">C</span>(<span class="mxinfo" id="T1:U209">5</span>,:)</span> = <span class="mxinfo" id="T29:U210">[<span class="mxinfo" id="T1:U211">1</span> <span class="mxinfo" id="T1:U212">0</span> <span class="mxinfo" id="T1:U213">0</span> <span class="mxinfo" id="T1:U214">0</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,61" id="srcline61">61</a></span><span class="line">         <span class="mxinfo" id="T29:U215"><span class="mxinfo" id="T29:U216"><span class="var type1" id="S19T17U309">C</span>(<span class="mxinfo" id="T1:U218">6</span>,:)</span> = <span class="mxinfo" id="T29:U219">[<span class="mxinfo" id="T1:U220">0</span> <span class="mxinfo" id="T1:U221">1</span> <span class="mxinfo" id="T1:U222">0</span> <span class="mxinfo" id="T1:U223">0</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,62" id="srcline62">62</a></span><span class="line">     <span class="keyword">end</span>   </span></span>
<span class="srcline"><span class="lineno"><a href="1,63" id="srcline63">63</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,64" id="srcline64">64</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,65" id="srcline65">65</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,66" id="srcline66">66</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,67" id="srcline67">67</a></span><span class="line">    <span class="comment">%Prediction</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,68" id="srcline68">68</a></span><span class="line">    <span class="mxinfo" id="T14:U224"><span class="var type1" id="S2T14U320">Xk</span>=<span class="mxinfo" id="T14:U226"><span class="var type1" id="S18T12U322">A</span>*<span class="var type1" id="S8T14U323">Xpre</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,69" id="srcline69">69</a></span><span class="line">    <span class="mxinfo" id="T12:U229"><span class="var type1" id="S3T12U326">Pk</span>=<span class="mxinfo" id="T12:U231"><span class="mxinfo" id="T12:U232"><span class="var type1" id="S18T12U329">A</span>*<span class="var type1" id="S9T12U330">Ppre</span></span>+(<span class="mxinfo" id="T12:U235"><span class="var type1" id="S15T1U334">M</span>*<span class="var type1" id="S13T12U335">Q</span>*<span class="var type1" id="S15T1U337">M</span>'</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,70" id="srcline70">70</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="1,71" id="srcline71">71</a></span><span class="line">    <span class="comment">%Innovation</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,72" id="srcline72">72</a></span><span class="line">    <span class="mxinfo" id="T13:U239"><span class="var type1" id="S17T13U340">In</span>=<span class="mxinfo" id="T13:U241"><span class="var type1" id="S10T13U342">Zpre</span>-(<span class="mxinfo" id="T13:U243"><span class="var type1" id="S19T17U345">C</span>*<span class="var type1" id="S2T14U346">Xk</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,73" id="srcline73">73</a></span><span class="line">    <span class="mxinfo" id="T18:U246"><span class="var type1" id="S20T18U349">Kk</span>=<span class="mxinfo" id="T18:U248"><span class="mxinfo" id="T18:U249"><span class="var type1" id="S3T12U352">Pk</span>*<span class="mxinfo" id="T18:U251"><span class="var type1" id="S19T17U354">C</span>'</span></span>*<span class="mxinfo" id="T19:U253">inv(<span class="mxinfo" id="T19:U254">(<span class="mxinfo" id="T19:U255"><span class="mxinfo" id="T17:U256"><span class="var type1" id="S19T17U361">C</span>*<span class="var type1" id="S3T12U362">Pk</span></span>*<span class="mxinfo" id="T18:U259"><span class="var type1" id="S19T17U364">C</span>'</span></span>)+<span class="var type1" id="S7T19U365">R</span></span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,74" id="srcline74">74</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,75" id="srcline75">75</a></span><span class="line">    <span class="comment">%Mise a jour</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,76" id="srcline76">76</a></span><span class="line">    <span class="mxinfo" id="T14:U262"><span class="var type1" id="S2T14U368">Xk</span>=<span class="mxinfo" id="T14:U264"><span class="var type1" id="S2T14U370">Xk</span>+<span class="mxinfo" id="T14:U266"><span class="var type1" id="S20T18U372">Kk</span>*<span class="var type1" id="S17T13U373">In</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,77" id="srcline77">77</a></span><span class="line">    <span class="mxinfo" id="T12:U269"><span class="var type1" id="S3T12U376">Pk</span>=<span class="mxinfo" id="T12:U271">(<span class="mxinfo" id="T12:U272"><span class="mxinfo" id="T12:U273">eye(4)</span>-<span class="mxinfo" id="T12:U274"><span class="var type1" id="S20T18U384">Kk</span>*<span class="var type1" id="S19T17U385">C</span></span></span>)*<span class="var type1" id="S3T12U386">Pk</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,78" id="srcline78">78</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,79" id="srcline79">79</a></span><span class="line">    <span class="comment">%Incrementation</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,80" id="srcline80">80</a></span><span class="line">    <span class="var type2" id="S5T0U390"><span class="message error" id="M1F1C">Pred</span></span>(1)=<span class="mxinfo" id="T1:U278"><span class="var type1" id="S2T14U393">Xk</span>(<span class="mxinfo" id="T1:U280">1</span>)</span>; <span class="comment">%X</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,81" id="srcline81">81</a></span><span class="line">    <span class="var type2" id="S5T0U398"><span class="message error" id="M2F1C">Pred</span></span>(2)=<span class="mxinfo" id="T1:U281"><span class="var type1" id="S2T14U401">Xk</span>(<span class="mxinfo" id="T1:U283">2</span>)</span>; <span class="comment">%Y</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,82" id="srcline82">82</a></span><span class="line">    <span class="var type2" id="S5T0U406"><span class="message error" id="M3F1C">Pred</span></span>(3)=<span class="mxinfo" id="T1:U284"><span class="var type1" id="S2T14U409">Xk</span>(<span class="mxinfo" id="T1:U286">3</span>)</span>; <span class="comment">%VX</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,83" id="srcline83">83</a></span><span class="line">    <span class="var type2" id="S5T0U414"><span class="message error" id="M4F1C">Pred</span></span>(4)=<span class="mxinfo" id="T1:U287"><span class="var type1" id="S2T14U417">Xk</span>(<span class="mxinfo" id="T1:U289">4</span>)</span>; <span class="comment">%VY</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,84" id="srcline84">84</a></span><span class="line">    <span class="mxinfo" id="T13:U290"><span class="var type1" id="S4T13U421">Zk</span> = <span class="var type1" id="S6T13U422">NewMeasure</span></span>;    </span></span>
<span class="srcline"><span class="lineno"><a href="1,85" id="srcline85">85</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,86" id="srcline86">86</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,87" id="srcline87">87</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,88" id="srcline88">88</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,89" id="srcline89">89</a></span><span class="line"></span></span>
</pre>
